<!-- @if (reportId) {
<p>Project ID: {{ projectId }}</p>
<p>Interim Report ID: {{ reportId }}</p>
} @else {
<p>Project ID: {{ projectId }}</p>
<p>Create new interim report</p>
} -->

<div style="display: flex; flex-direction: column; gap: 1rem; padding: 1rem">
  <mat-card>
    <mat-card-header>
      <mat-card-title-group>
        <mat-card-title>Interim Report</mat-card-title>
        <span style="display: flex; align-items: center">
          <i style="padding-right: 1rem">Status:</i>
          <mat-chip [ngClass]="getStatusColorClass(interimReport?.status)">
            {{ interimReport?.status }}
          </mat-chip>
          <span class="report-action">
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <span>
                <button mat-menu-item (click)="deleteInterimReport()">
                  Cancel report
                </button>
              </span>
            </mat-menu>
          </span>
        </span>
        <mat-card-subtitle>{{ interimReport?.id }}</mat-card-subtitle>
      </mat-card-title-group>
    </mat-card-header>
    <mat-card-content>
      <div style="display: flex; flex-direction: column; gap: 1rem">
        <p>Report Date: {{ interimReport?.dueDate }}</p>
        <p>Report Description: {{ interimReport?.description }}</p>

        <mat-card>
          <mat-card-header>
            <mat-card-title-group>
              <mat-card-title>Claim</mat-card-title>
              <span>
                <i style="padding-right: 1rem">Status:</i>
                <mat-chip
                  [ngClass]="getStatusColorClass(interimReport?.claim?.status)"
                >
                  {{ interimReport?.claim?.status }}</mat-chip
                >
              </span>
              <mat-card-subtitle>{{
                interimReport?.claim?.id
              }}</mat-card-subtitle>
            </mat-card-title-group>
          </mat-card-header>
          <mat-card-content style="display: flex; gap: 2rem">
            <div>
              <p>
                <strong>Claim Type:</strong>
                {{ interimReport?.claim?.claimType }}
              </p>
              <p>
                <strong>Claim Amount:</strong>
                {{ interimReport?.claim?.claimAmount }}
              </p>
              <p>
                <strong>Claim Date:</strong>
                {{ interimReport?.claim?.claimDate }}
              </p>
            </div>
            <div>
              <p>
                <strong>Earliest Invoice:</strong>
                {{ interimReport?.claim?.earliestInvoice }}
              </p>
              <p>
                <strong>Latest Invoice:</strong>
                {{ interimReport?.claim?.latestInvoice }}
              </p>
              <p>
                <strong>Number of invoices:</strong>
                {{ interimReport?.claim?.invoiceCount }}
              </p>
            </div>
          </mat-card-content>
          <mat-card-actions align="end" style="display: flex; gap: 1rem">
            <button mat-raised-button color="primary" (click)="editClaim()">
              Edit
            </button>
            <button mat-button color="warn" (click)="deleteClaim()">
              Delete
            </button>
          </mat-card-actions>
        </mat-card>
        <mat-divider></mat-divider>
        <mat-card>
          <mat-card-header>
            <mat-card-title-group>
              <mat-card-title>Progress Report</mat-card-title>
              <span>
                <i style="padding-right: 1rem">Status:</i>
                <mat-chip
                  [ngClass]="getStatusColorClass(interimReport?.report?.status)"
                >
                  {{ interimReport?.report?.status }}
                </mat-chip>
              </span>
              <mat-card-subtitle>{{
                interimReport?.report?.id
              }}</mat-card-subtitle>
            </mat-card-title-group>
          </mat-card-header>
          <mat-card-content style="display: flex; gap: 2rem">
            <div>
              <p>
                <strong>Progress Date:</strong>
                {{ interimReport?.report?.reportDate }}
              </p>
              <p>
                <strong>Progress Type:</strong>
                {{ interimReport?.report?.reportType }}
              </p>
            </div>
          </mat-card-content>
          <mat-card-actions align="end" style="display: flex; gap: 1rem">
            <button mat-button color="primary" (click)="editProgressReport()">
              View
            </button>
            <button mat-button color="warn" (click)="deleteProgressReport()">
              Delete
            </button>
          </mat-card-actions>
        </mat-card>
        <mat-divider></mat-divider>
        <mat-card>
          <mat-card-header>
            <mat-card-title-group>
              <mat-card-title>Forecast</mat-card-title>

              <mat-chip
                [ngClass]="getStatusColorClass(interimReport?.forecast?.status)"
              >
                {{ interimReport?.forecast?.status }}
              </mat-chip>
              <mat-card-subtitle>{{
                interimReport?.forecast?.id
              }}</mat-card-subtitle>
            </mat-card-title-group>
          </mat-card-header>
          <mat-card-content style="text-align: center">
            <i> Forecast has been skipped for this report. </i>
          </mat-card-content>
          <!-- <mat-card-actions align="end" style="display: flex; gap: 1rem">
            <a
              [routerLink]="[
                '/drif-projects',
                projectId,
                'interim-reports',
                interimReport?.id,
                'forecasts',
                'create'
              ]"
              ><button
                mat-raised-button
                color="primary"
                (click)="createForecast()"
              >
                Create
              </button></a
            >
          </mat-card-actions> -->
        </mat-card>
      </div>
    </mat-card-content>
  </mat-card>
</div>
