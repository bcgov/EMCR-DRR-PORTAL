<div
  style="display: flex; flex-direction: column; gap: 1rem; padding: 1rem"
  *transloco="let t; read: 'project'"
>
  <mat-card>
    <mat-card-header>
      <mat-card-title-group>
        <mat-card-title>Interim Report</mat-card-title>
        <span style="display: flex; align-items: center">
          <i style="padding-right: 1rem">Status:</i>
          <mat-chip [ngClass]="getStatusColorClass(interimReport?.status)">
            {{ interimReport?.status | transloco }}
          </mat-chip>
          <span class="report-action">
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <span>
                <button mat-menu-item (click)="deleteInterimReport()">
                  Cancel report
                </button>
              </span>
            </mat-menu>
          </span>
        </span>
        <mat-card-subtitle>{{ interimReport?.id }}</mat-card-subtitle>
      </mat-card-title-group>
    </mat-card-header>
    <mat-card-content>
      <div style="display: flex; flex-direction: column; gap: 1rem">
        <div class="row">
          <drr-input
            label="Year"
            [rxFormControl]="interimReportForm.get('year')"
          ></drr-input>
          <drr-input
            label="Quarter"
            [rxFormControl]="interimReportForm.get('quarter')"
          ></drr-input>
        </div>
        <div class="row">
          <drr-input
            label="Report Date"
            [rxFormControl]="interimReportForm.get('createDate')"
          >
          </drr-input>
          <drr-input
            label="Due Date"
            [rxFormControl]="interimReportForm.get('dueDate')"
          >
          </drr-input>
        </div>

        <drr-textarea
          label="Description"
          [rxFormControl]="interimReportForm.get('description')"
        ></drr-textarea>
      </div>
    </mat-card-content>
  </mat-card>
  <mat-tab-group>
    <mat-tab label="Claim">
      <mat-card>
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>Claim</mat-card-title>
            <span>
              <i style="padding-right: 1rem">Status:</i>
              <mat-chip
                [ngClass]="
                  getStatusColorClass(interimReport?.projectClaim?.status)
                "
              >
                {{ interimReport?.projectClaim?.status }}</mat-chip
              >
            </span>
            <mat-card-subtitle>{{
              interimReport?.projectClaim?.id
            }}</mat-card-subtitle>
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content style="display: flex; gap: 2rem">
          <div>
            <p>
              <strong>Claim Type:</strong>
              {{ interimReport?.projectClaim?.claimType }}
            </p>
            <p>
              <strong>Claim Amount:</strong>
              {{ interimReport?.projectClaim?.claimAmount }}
            </p>
            <p>
              <strong>Claim Date:</strong>
              {{ interimReport?.projectClaim?.claimDate }}
            </p>
          </div>
          <div>
            <p>
              <strong>Earliest Invoice:</strong>
              <!-- {{ interimReport?.claim?.earliestInvoice }} -->
            </p>
            <p>
              <strong>Latest Invoice:</strong>
              <!-- {{ interimReport?.claim?.latestInvoice }} -->
            </p>
            <p>
              <strong>Number of invoices:</strong>
              <!-- {{ interimReport?.claim?.invoiceCount }} -->
            </p>
          </div>
        </mat-card-content>
        <mat-card-actions align="end" style="display: flex; gap: 1rem">
          <button mat-raised-button color="primary" (click)="editClaim()">
            Edit
          </button>
          <button mat-button color="warn" (click)="deleteClaim()">
            Delete
          </button>
        </mat-card-actions>
      </mat-card>
    </mat-tab>
    <mat-tab label="Progress">
      <mat-card>
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>Progress Report</mat-card-title>
            <span>
              <i style="padding-right: 1rem">Status:</i>
              <mat-chip
                [ngClass]="
                  getStatusColorClass(interimReport?.progressReport?.status)
                "
              >
                {{ interimReport?.progressReport?.status }}
              </mat-chip>
            </span>
            <mat-card-subtitle>{{
              interimReport?.progressReport?.id
            }}</mat-card-subtitle>
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content style="display: flex; gap: 2rem">
          <div>
            <p>
              <strong>Progress Date:</strong>
              {{ interimReport?.progressReport?.reportDate }}
            </p>
            <p>
              <strong>Progress Type:</strong>
              {{ interimReport?.progressReport?.reportType }}
            </p>
          </div>
        </mat-card-content>
        <mat-card-actions align="end" style="display: flex; gap: 1rem">
          <a
            [routerLink]="[
              '/drif-projects',
              projectId,
              'interim-reports',
              interimReport?.id,
              'progress-reports',
              interimReport?.progressReport?.id,
              'edit'
            ]"
            ><button mat-raised-button color="primary">Edit</button></a
          >
        </mat-card-actions>
      </mat-card>
    </mat-tab>
    <mat-tab label="Forecast">
      <mat-card>
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>Forecast</mat-card-title>

            <mat-chip
              [ngClass]="getStatusColorClass(interimReport?.forecast?.status)"
            >
              {{ interimReport?.forecast?.status }}
            </mat-chip>
            <mat-card-subtitle>{{
              interimReport?.forecast?.id
            }}</mat-card-subtitle>
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content style="text-align: center">
          <i> Forecast has been skipped for this report. </i>
        </mat-card-content>
        <!-- <mat-card-actions align="end" style="display: flex; gap: 1rem">
          <a
            [routerLink]="[
              '/drif-projects',
              projectId,
              'interim-reports',
              interimReport?.id,
              'forecasts',
              'create'
            ]"
            ><button
              mat-raised-button
              color="primary"
              (click)="createForecast()"
            >
              Create
            </button></a
          >
        </mat-card-actions> -->
      </mat-card>
    </mat-tab>
  </mat-tab-group>
</div>
