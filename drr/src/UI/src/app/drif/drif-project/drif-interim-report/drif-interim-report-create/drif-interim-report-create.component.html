<div class="app-stepper-container" *transloco="let t">
  <div class="app-stepper-header">
    <div style="flex: 1">
      <h5 style="font-size: 1.2rem; margin-bottom: 0.5rem">
        {{ t("interimReport") }}
      </h5>
      <!-- <span>
        {{ t("project") }}: {{ project?.name }} ({{ project?.id }})
      </span> -->
    </div>
    <div>
      <div class="header-actions">
        <button mat-stroked-button color="primary" (click)="goBack()">
          {{ t("exitForm") }}
        </button>
      </div>
      <!-- <div class="save-info">
        <div style="display: flex; flex-direction: row; gap: 1rem">
          <i *ngIf="autoSaveCountdown <= 30 && autoSaveCountdown > 0"
            >Saving in {{ autoSaveCountdown }}
            {{ autoSaveCountdown === 1 ? "second" : "seconds" }}...
          </i>
          <i
            *ngIf="
              lastSavedAt && (autoSaveCountdown === 0 || autoSaveCountdown > 30)
            "
            >Saved at {{ lastSavedAt | date : "mediumTime" }}</i
          >
        </div>
      </div> -->
    </div>
  </div>
  <mat-stepper
    class="app-stepper"
    [linear]="true"
    labelPosition="bottom"
    (selectionChange)="stepperSelectionChange($event)"
    [orientation]="stepperOrientation"
    #stepper
  >
    <mat-step
      label="Instructions"
      [stepControl]="getConfigurationForm()"
      [optional]="false"
    >
      <div style="display: flex; flex-direction: column; gap: 1rem">
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras a
          suscipit lectus. Sed molestie dolor nec tortor hendrerit consequat. In
          at mauris vel lorem molestie rutrum. Curabitur dictum ligula id
          fermentum ultrices. In vel tortor volutpat, ultrices ipsum vel,
          lacinia eros. Curabitur quis lectus et ipsum sagittis semper et
          commodo turpis. Curabitur viverra felis vel consectetur fringilla.
          Nunc eu egestas magna, eget tincidunt ex. Integer accumsan, velit eget
          faucibus ornare, enim risus accumsan dui, congue luctus dui eros sed
          nunc. Vestibulum et blandit libero. Fusce nec mauris interdum, cursus
          nibh ut, tristique leo. Nullam rhoncus, lectus ac euismod semper,
          massa lacus elementum ipsum, vel mollis lacus sem in ante. Mauris a
          dignissim nunc. Duis mollis facilisis odio, nec interdum enim
          malesuada sed. Fusce congue tristique fermentum.
        </p>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras a
          suscipit lectus. Sed molestie dolor nec tortor hendrerit consequat. In
          at mauris vel lorem molestie rutrum. Curabitur dictum ligula id
          fermentum ultrices. In vel tortor volutpat, ultrices ipsum vel,
          lacinia eros.
        </p>

        <mat-label class="drr-label"> Select report type </mat-label>
        <drr-select
          style="align-self: flex-start; width: 25rem"
          [label]="t('reportType')"
          [rxFormControl]="getConfigurationForm().get('periodType')"
          [options]="periodTypeOptions"
        ></drr-select>
      </div>
      <div class="drr-stepper-action">
        <button
          id="next1"
          mat-flat-button
          color="primary"
          matStepperNext
          type="button"
        >
          {{ t("next") }}
        </button>
      </div>
    </mat-step>
    <mat-step label="Interim Report Details">
      <div style="display: flex; flex-direction: column; gap: 1rem">
        <ng-container
          [ngSwitch]="interimReportForm.get('configuration.periodType')?.value"
        >
          <div *ngSwitchCase="'Interim'">
            <h5>Start New Interim Report</h5>
            @if (canCreateReportResult?.canCreate) {
              <p>
                <i>
                  An interim report is a report that is submitted in the middle
                  of the project cycle. It is used to provide an update on the
                  project progress and to request additional funding if needed.
                </i>
              </p>
              <mat-label class="drr-label">Report Period</mat-label>
              <p>{{ canCreateReportResult?.description }}</p>
            } @else {
              <p>
                A new interim report cannot be created until the previous report
                is approved.
              </p>
            }
          </div>
          <div *ngSwitchCase="'OffCycle'">
            <mat-label class="drr-label"
              >You're about to create an off-cycle report</mat-label
            >
            <p>
              <i>
                An off-cycle report is a report that is submitted outside of the
                regular reporting schedule. It is used to provide an update on
                the project progress and to request additional funding if
                needed.
              </i>
            </p>
          </div>
          <div *ngSwitchCase="'Final'">
            <mat-label class="drr-label"
              >You're about to create a final report</mat-label
            >
            <p>
              <i>
                A final report is a report that is submitted at the end of the
                project cycle. It is used to provide a summary of the project
                outcomes and to request final payment.
              </i>
            </p>
          </div>
          <div *ngSwitchCase="'Skip'">
            <mat-label class="drr-label"
              >You're about to skip the interim report</mat-label
            >
            <p>
              <i>
                You've chosen to skip the report creation. This means that you
                will not be able to submit a report for this period.
              </i>
            </p>
          </div>
        </ng-container>
      </div>
      <div class="drr-stepper-actions">
        <button mat-stroked-button color="primary" matStepperPrevious>
          {{ t("back") }}
        </button>
        <button
          id="next2"
          mat-flat-button
          color="primary"
          matStepperNext
          type="button"
        >
          {{ canCreateReportResult?.canCreate ? t("create") : t("close") }}
        </button>
      </div></mat-step
    >
  </mat-stepper>
</div>
