<div class="drr-step-container" *transloco="let t">
  <form [formGroup]="proponentInformationForm">
    <h3>{{ t("proponentType") }}</h3>
    <drr-radio-button
      [label]="t('proponentType')"
      [rxFormControl]="proponentInformationForm.get('proponentType')"
      [options]="proponentTypeOptions"
    ></drr-radio-button>

    <h3>{{ t("proponentName") }}</h3>
    <drr-input
      class="drr-single-input"
      [id]="'proponentName'"
      [label]="t('proponentNameText')"
      [rxFormControl]="proponentInformationForm.get('proponentName')"
      [maxlength]="100"
    ></drr-input>

    <h3>{{ t("projectContact") }}</h3>
    <div class="contacts-container">
      <drr-input
        [id]="'projectContact_firstName'"
        [label]="t('firstName')"
        [rxFormControl]="
          proponentInformationForm.get('projectContact.firstName')
        "
        [maxlength]="40"
      ></drr-input>
      <drr-input
        [id]="'projectContact_lastName'"
        [label]="t('lastName')"
        [rxFormControl]="
          proponentInformationForm.get('projectContact.lastName')
        "
        [maxlength]="40"
      ></drr-input>
      <drr-input
        [id]="'projectContact_title'"
        [label]="t('title')"
        [rxFormControl]="proponentInformationForm.get('projectContact.title')"
        [maxlength]="100"
      ></drr-input>
      <drr-input
        [id]="'projectContact_department'"
        [label]="t('department')"
        [rxFormControl]="
          proponentInformationForm.get('projectContact.department')
        "
        [maxlength]="40"
      ></drr-input>
      <drr-input
        [id]="'projectContact_phone'"
        [label]="t('phone')"
        [rxFormControl]="proponentInformationForm.get('projectContact.phone')"
        [maxlength]="10"
        [type]="'tel'"
      ></drr-input>
      <drr-input
        [id]="'projectContact_email'"
        [label]="t('email')"
        [rxFormControl]="proponentInformationForm.get('projectContact.email')"
        [maxlength]="100"
        [type]="'email'"
      ></drr-input>
    </div>
    <div>
      <div
        *ngFor="
          let projectContact of getFormArray('additionalContacts').controls;
          let i = index
        "
      >
        <h4>{{ t("additionalContact") + " " + (i + 1) }}</h4>
        <div class="contacts-container">
          <drr-input
            #contactFirstNameInput
            [id]="'projectContact_firstName_' + i"
            [label]="t('firstName')"
            [rxFormControl]="projectContact.get('firstName')"
            [maxlength]="40"
          ></drr-input>
          <drr-input
            [id]="'projectContact_lastName_' + i"
            [label]="t('lastName')"
            [rxFormControl]="projectContact.get('lastName')"
            [maxlength]="40"
          ></drr-input>
          <drr-input
            [id]="'projectContact_title_' + i"
            [label]="t('title')"
            [rxFormControl]="projectContact.get('title')"
            [maxlength]="100"
          ></drr-input>
          <drr-input
            [id]="'projectContact_department_' + i"
            [label]="t('department')"
            [rxFormControl]="projectContact.get('department')"
            [maxlength]="40"
          ></drr-input>
          <drr-input
            [id]="'projectContact_phone_' + i"
            [label]="t('phone')"
            [rxFormControl]="projectContact.get('phone')"
            [maxlength]="10"
            [type]="'tel'"
          ></drr-input>
          <drr-input
            class="project-contact-email"
            [id]="'projectContact_email_' + i"
            [label]="t('email')"
            [rxFormControl]="projectContact.get('email')"
            [maxlength]="100"
            [type]="'email'"
          ></drr-input>

          <button
            *ngIf="i > 0"
            mat-raised-button
            color="warn"
            (click)="removeAdditionalContact(i)"
          >
            Delete
          </button>
        </div>
      </div>

      <button
        *ngIf="getFormArray('additionalContacts').length < 2"
        id="addProjectContact"
        mat-stroked-button
        type="button"
        color="primary"
        (click)="addAdditionalContact()"
      >
        <mat-icon>add</mat-icon>
        {{ t("addAdditionalContact") }}
      </button>
    </div>

    <h3>{{ t("partneringProponents") }}</h3>
    <div>
      <div
        class="proponent-container"
        *ngFor="
          let proponent of getFormArray('partneringProponentsArray').controls;
          let i = index
        "
      >
        <drr-input
          #proponentInput
          class="drr-single-input"
          [id]="'proponent_' + i"
          [label]="t('partneringProponentNameText')"
          [rxFormControl]="proponent.get('value')"
          [maxlength]="100"
        ></drr-input>
        <button mat-raised-button color="warn" (click)="removeProponent(i)">
          <mat-icon>delete</mat-icon>
          {{ t("delete") }}
        </button>
      </div>

      <button
        id="addProponent"
        style="margin-top: 10px"
        [style.padding]="isMobile ? '24px 16px' : ''"
        mat-stroked-button
        type="button"
        color="primary"
        (click)="addProponent()"
      >
        <mat-icon>add</mat-icon>
        {{ t("addProponent") }}
      </button>
    </div>
  </form>
</div>
